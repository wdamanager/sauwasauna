---
/**
 * CollaboratorsSection - Sección de colaboradores y patrocinadores
 * WDA-909: Muestra partner y sponsors del evento
 *
 * Usa estilos globales de SAUWA (utilities.css, layouts.css)
 */

import type { Locale } from '../../lib/booking/types';

interface Partner {
  name: string;
  slug?: string;
  logo?: string;
  url?: string;
}

interface Sponsor {
  name: string;
  logo: string;
  url?: string;
}

export interface Props {
  partner?: Partner | null;
  sponsors?: Sponsor[];
  locale?: Locale;
}

const { partner, sponsors = [], locale = 'es' } = Astro.props;

const translations = {
  es: {
    label: 'Colaboradores',
    title: 'Hacen posible esta experiencia',
  },
  ca: {
    label: 'Col·laboradors',
    title: 'Fan possible aquesta experiència',
  },
  en: {
    label: 'Collaborators',
    title: 'Make this experience possible',
  },
  fr: {
    label: 'Collaborateurs',
    title: 'Rendent cette expérience possible',
  },
};

const t = translations[locale];

// Only render if we have something to show
const hasContent = partner || sponsors.length > 0;
---

{hasContent && (
  <section class="section section--bg-white collaborators-section">
    <div class="container">
      <header class="section-header section-header--center">
        <h2 class="section-label section-label--primary">{t.label}</h2>
        <h3 class="section-title section-title--center">{t.title}</h3>
      </header>

      <div class="collaborators-logos">
        {/* Partner logo */}
        {partner && (
          <div class="collaborator-item">
            {partner.logo ? (
              partner.url ? (
                <a
                  href={partner.url}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="collaborator-link"
                  title={partner.name}
                >
                  <img
                    src={partner.logo}
                    alt={partner.name}
                    class="collaborator-logo"
                    loading="lazy"
                  />
                </a>
              ) : (
                <img
                  src={partner.logo}
                  alt={partner.name}
                  class="collaborator-logo"
                  loading="lazy"
                />
              )
            ) : (
              partner.url ? (
                <a
                  href={partner.url}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="collaborator-link collaborator-name"
                >
                  {partner.name}
                </a>
              ) : (
                <span class="collaborator-name">{partner.name}</span>
              )
            )}
          </div>
        )}

        {/* Sponsor logos */}
        {sponsors.map((sponsor) => (
          <div class="collaborator-item">
            {sponsor.url ? (
              <a
                href={sponsor.url}
                target="_blank"
                rel="noopener noreferrer"
                class="collaborator-link"
                title={sponsor.name}
              >
                <img
                  src={sponsor.logo}
                  alt={sponsor.name}
                  class="collaborator-logo"
                  loading="lazy"
                />
              </a>
            ) : (
              <img
                src={sponsor.logo}
                alt={sponsor.name}
                class="collaborator-logo"
                loading="lazy"
              />
            )}
          </div>
        ))}
      </div>
    </div>
  </section>
)}

<style>
  /* Solo estilos específicos del componente, no tipografía */
  .collaborators-section {
    border-top: 1px solid rgba(0, 0, 0, 0.06);
  }

  .collaborators-logos {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 3rem;
  }

  .collaborator-item {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .collaborator-logo {
    max-height: 60px;
    max-width: 180px;
    width: auto;
    height: auto;
    object-fit: contain;
    filter: grayscale(100%);
    opacity: 0.65;
    transition: filter 0.3s ease, opacity 0.3s ease;
  }

  .collaborator-logo:hover {
    filter: grayscale(0%);
    opacity: 1;
  }

  .collaborator-name {
    font-family: var(--font-family-primary);
    font-size: 1.125rem;
    font-weight: var(--font-weight-medium);
    color: var(--color-text-secondary);
    transition: color 0.3s ease;
    text-decoration: none;
  }

  .collaborator-name:hover {
    color: var(--color-text-primary);
  }

  .collaborator-link {
    display: block;
    text-decoration: none;
  }

  /* Mobile */
  @media (max-width: 640px) {
    .collaborators-logos {
      gap: 2rem;
    }

    .collaborator-logo {
      max-height: 50px;
      max-width: 150px;
    }
  }
</style>
