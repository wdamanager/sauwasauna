---
/**
 * Root index - Language detection and redirect
 *
 * Primary: .htaccess redirects at server level (instant, no flash)
 * Fallback: JavaScript redirect (if .htaccess fails or disabled)
 *
 * Priority:
 * 1. localStorage (user preference)
 * 2. Browser language (navigator.language)
 * 3. Default to Spanish (es)
 */
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="refresh" content="0; url=/es/" />
    <title>SAUWA</title>
    <meta name="robots" content="noindex, follow" />
    <link rel="canonical" href="https://sauwasauna.com/es/" />
    <style>body{display:none}</style>
    <script>
      // Immediate redirect (before body loads)
      (function() {
        const supportedLanguages = ['es', 'ca', 'en', 'fr'];
        const defaultLang = 'es';

        // 1. Check localStorage (user preference)
        const savedLang = localStorage.getItem('preferredLanguage');
        if (savedLang && supportedLanguages.includes(savedLang)) {
          window.location.replace(`/${savedLang}/`);
          return;
        }

        // 2. Detect browser language
        const browserLang = navigator.language.toLowerCase();
        const langCode = browserLang.split('-')[0];
        if (supportedLanguages.includes(langCode)) {
          window.location.replace(`/${langCode}/`);
          return;
        }

        // 3. Fallback to Spanish
        window.location.replace(`/${defaultLang}/`);
      })();
    </script>
  </head>
  <body></body>
</html>
