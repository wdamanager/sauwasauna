---
/**
 * Homepage ES - SAUWA Landing Page
 * Opcion-2 hero + additional sections with opcion-2 typography
 */

import Layout from '../../layouts/Layout.astro';
import NavbarScroll from '../../components/NavbarScroll.astro';
import HeroSlider from '../../components/HeroSlider.astro';
import BenefitsSection from '../../components/BenefitsSection.astro';
import BenefitsBlogSection from '../../components/BenefitsBlogSection.astro';
import BenefitsImageSection from '../../components/BenefitsImageSection.astro';
import ExperienceSection from '../../components/ExperienceSection.astro';
import SessionPhases from '../../components/SessionPhases.astro';
import CTANewsletter from '../../components/CTANewsletter.astro';
import Footer from '../../components/layout/Footer.astro';
import FooterBlack from '../../components/layout/FooterBlack.astro';
import NewsletterForm from '../../components/NewsletterForm.astro';
import CookieBanner from '../../components/CookieBanner.astro';
import { cookieBannerTexts } from '../../data/cookieBannerTexts';
import '../../styles/landing.css';

const lang = 'es';

// SEO metadata
const title = 'Sauna finlandesa en Andorra | SAUWA: leña + baños fríos';
const description = 'Vive la auténtica sauna finlandesa de leña y baños de agua fría en plena naturaleza de Andorra. Ritual nórdico guiado para recuperar cuerpo y mente tras la nieve.';
---

<Layout title={title} description={description} lang={lang} pageType="homepage">

  <!-- Navbar Scroll -->
  <NavbarScroll locale={lang} />

  <!-- Ambient Audio - Autoplay fire crackling sound (plays once) -->
  <audio autoplay muted id="ambient-audio">
    <source src="/audio/fire-crackling.mp3" type="audio/mpeg" />
  </audio>

  <!-- Hero Section - Full Screen with opcion-2 style -->
  <section class="hero-section">
    <!-- Background Slider -->
    <HeroSlider />

    <!-- Centered Content -->
    <div class="hero-content-wrapper">
      <!-- Logo -->
      <img
        src="/logos/sauwa-full-white.svg"
        alt="SAUWA"
        class="logo"
      />

      <!-- H1 - Smaller -->
      <h1 class="heading-primary text-2xl mb-1 animate-fade-in-up animation-delay-200">Sauna en Andorra</h1>

      <!-- H2 - Larger, Main headline -->
      <h2 class="heading-secondary text-4xl md:text-5xl leading-tight mb-12 animate-fade-in-up animation-delay-400">
        La primera experiencia de auténtica sauna finlandesa de leña y baños de agua helada en plena naturaleza.
      </h2>

      <!-- Newsletter Form - Hero Variant -->
      <NewsletterForm variant="hero" locale={lang} />
    </div>

    <!-- Scroll Indicator -->
    <a href="#beneficios-imagen" class="scroll-indicator" aria-label="Descubrir beneficios">
      <div class="scroll-icon"></div>
    </a>
  </section>

  <!-- WDA-271: Nueva estructura -->
  <!-- WDA-267: Imagen 50/50 + Beneficios -->
  <BenefitsImageSection locale={lang} />

  <!-- SessionPhases Mejorado (WDA-265) -->
  <SessionPhases locale={lang} />

  <!-- Benefits + Blog Section with Sticky Scroll -->
  <BenefitsBlogSection locale={lang} />

  <!-- CTA Newsletter Mejorado (WDA-269) -->
  <CTANewsletter locale={lang} />

  <!-- Footer Negro (WDA-268) -->
  <FooterBlack locale={lang} />

  <!-- Cookie Banner -->
  <CookieBanner {...cookieBannerTexts[lang]} />
</Layout>

<script>
  // Handle ambient audio with user interaction for browsers that require it
  document.addEventListener('DOMContentLoaded', () => {
    const audio = document.getElementById('ambient-audio') as HTMLAudioElement;

    if (audio) {
      // Remove muted attribute and set low volume for ambient effect
      audio.muted = false;
      audio.volume = 0.3; // 30% volume for ambient background

      // Try to play immediately
      const playPromise = audio.play();

      if (playPromise !== undefined) {
        playPromise.catch(() => {
          // If autoplay fails, play on first user interaction
          const playOnInteraction = () => {
            audio.play();
            document.removeEventListener('click', playOnInteraction);
            document.removeEventListener('touchstart', playOnInteraction);
          };

          document.addEventListener('click', playOnInteraction);
          document.addEventListener('touchstart', playOnInteraction);
        });
      }
    }
  });
</script>
