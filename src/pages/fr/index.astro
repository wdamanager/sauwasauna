---
/**
 * Homepage FR - SAUWA Landing Page
 * Opcion-2 hero + additional sections with opcion-2 typography
 */

import Layout from '../../layouts/Layout.astro';
import NavbarScroll from '../../components/NavbarScroll.astro';
import HeroSlider from '../../components/HeroSlider.astro';
import BenefitsSection from '../../components/BenefitsSection.astro';
import BenefitsBlogSection from '../../components/BenefitsBlogSection.astro';
import BenefitsImageSection from '../../components/BenefitsImageSection.astro';
import ExperienceSection from '../../components/ExperienceSection.astro';
import SessionPhases from '../../components/SessionPhases.astro';
import CTANewsletter from '../../components/CTANewsletter.astro';
import Footer from '../../components/layout/Footer.astro';
import FooterBlack from '../../components/layout/FooterBlack.astro';

const lang = 'fr';

// SEO metadata
const title = 'Sauna finlandais en Andorre | SAUWA: chauffage au bois + bains froids';
const description = 'Découvrez l\'authentique sauna finlandais chauffé au bois et les bains d\'eau glacée au cœur de la nature andorrane. Rituel nordique guidé pour récupérer corps et esprit après le ski.';
---

<Layout title={title} description={description} lang={lang} pageType="homepage">

  <!-- Navbar Scroll -->
  <NavbarScroll locale={lang} />

  <!-- Ambient Audio - Autoplay fire crackling sound (plays once) -->
  <audio autoplay muted id="ambient-audio">
    <source src="/audio/fire-crackling.mp3" type="audio/mpeg" />
  </audio>

  <!-- Hero Section - Full Screen with opcion-2 style -->
  <section class="hero-section">
    <!-- Background Slider -->
    <HeroSlider />

    <!-- Centered Content -->
    <div class="hero-content-wrapper">
      <!-- Logo -->
      <img
        src="/logos/sauwa-full-white.svg"
        alt="SAUWA"
        class="logo"
      />

      <!-- H1 - Smaller -->
      <h1 class="heading-primary text-2xl mb-1 animate-fade-in-up animation-delay-200">Sauna en Andorre</h1>

      <!-- H2 - Larger, Main headline -->
      <h2 class="heading-secondary text-4xl md:text-5xl leading-tight mb-12 animate-fade-in-up animation-delay-400">
        La première expérience authentique de sauna finlandais au bois et de bains d'eau glacée en pleine nature.
      </h2>

      <!-- CTA Text -->
      <p class="text-cta text-lg mb-1 animate-fade-in-up animation-delay-600">Recevez un accès prioritaire à notre ouverture:</p>

      <!-- Newsletter Form -->
      <form class="newsletter-form" id="newsletter-form">
        <!-- Email Input -->
        <input
          type="email"
          name="email"
          placeholder="Entrez votre email…"
          required
          class="email-input"
        />

        <!-- Privacy Checkbox -->
        <label class="privacy-label">
          <input type="checkbox" name="privacy" required class="privacy-checkbox" />
          <span class="privacy-text">
            J'ai lu et j'accepte la
            <a href="/fr/politique-de-confidentialite/" class="privacy-link">politique de confidentialité</a>
            <span class="required-asterisk">*</span>
          </span>
        </label>

        <!-- Submit Button -->
        <button type="submit" class="submit-button">
          PRÉVENEZ-MOI
        </button>
      </form>
    </div>
  </section>

  <!-- WDA-271: Nouvelle structure -->
  <!-- WDA-267: Image 50/50 + Bénéfices -->
  <BenefitsImageSection locale={lang} />

  <!-- SessionPhases Amélioré (WDA-265) -->
  <SessionPhases locale={lang} />

  <!-- Benefits + Blog Section with Sticky Scroll -->
  <BenefitsBlogSection locale={lang} />

  <!-- CTA Newsletter Amélioré (WDA-269) -->
  <CTANewsletter locale={lang} />

  <!-- Footer Noir (WDA-268) -->
  <FooterBlack locale={lang} />
</Layout>

<script>
  // Handle ambient audio with user interaction for browsers that require it
  document.addEventListener('DOMContentLoaded', () => {
    const audio = document.getElementById('ambient-audio') as HTMLAudioElement;

    if (audio) {
      // Remove muted attribute and set low volume for ambient effect
      audio.muted = false;
      audio.volume = 0.3; // 30% volume for ambient background

      // Try to play immediately
      const playPromise = audio.play();

      if (playPromise !== undefined) {
        playPromise.catch(() => {
          // If autoplay fails, play on first user interaction
          const playOnInteraction = () => {
            audio.play();
            document.removeEventListener('click', playOnInteraction);
            document.removeEventListener('touchstart', playOnInteraction);
          };

          document.addEventListener('click', playOnInteraction);
          document.addEventListener('touchstart', playOnInteraction);
        });
      }
    }
  });
</script>
