---
interface Props {
  gtmId: string;
}

const { gtmId } = Astro.props;
const isDevelopment = import.meta.env.PUBLIC_ENV === 'development';
const shouldLoadGTM = !isDevelopment || import.meta.env.PUBLIC_ENABLE_GTM_IN_DEV === 'true';
---

{shouldLoadGTM && gtmId && (
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe
      src={`https://www.googletagmanager.com/ns.html?id=${gtmId}`}
      height="0"
      width="0"
      style="display:none;visibility:hidden"
      title="Google Tag Manager"
    ></iframe>
  </noscript>
  <!-- End Google Tag Manager (noscript) -->
)}